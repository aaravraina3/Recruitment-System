{"ast":null,"code":"/**\n * API Service Layer\n * Handles all communication with the backend API\n * Automatically includes Clerk JWT token in requests\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n/**\n * Make an authenticated API request\n * @param {string} endpoint - API endpoint path\n * @param {object} options - Fetch options\n * @param {function} getToken - Clerk's getToken function\n * @returns {Promise} Response data\n */\nconst apiRequest = async (endpoint, options = {}, getToken) => {\n  try {\n    // Get the Clerk session token\n    const token = await getToken();\n    if (!token) {\n      // For public endpoints like generic chat, we might not need token, \n      // but this wrapper assumes auth.\n      // For MVP, if no token, just return null or throw?\n      // Let's try to proceed if optional, but usually we want auth.\n      // Throwing error to ensure safety.\n      throw new Error('No authentication token available');\n    }\n\n    // Prepare headers\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n      ...options.headers\n    };\n\n    // Make the request\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      ...options,\n      headers\n    });\n\n    // Handle response\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || errorData.error || `HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Request Error:', error);\n    throw error;\n  }\n};\nexport const authAPI = {\n  getMe: async getToken => {\n    return apiRequest('/api/auth/me', {\n      method: 'GET'\n    }, getToken);\n  }\n};\n\n/**\n * User API endpoints\n */\nexport const userAPI = {\n  create: async (userData, getToken) => {\n    return apiRequest('/api/users/create', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    }, getToken);\n  },\n  get: async (email, getToken) => {\n    return apiRequest(`/api/users/get/${encodeURIComponent(email)}`, {\n      method: 'GET'\n    }, getToken);\n  }\n};\n\n/**\n * Application API endpoints\n */\nexport const applicationAPI = {\n  create: async (applicationData, getToken) => {\n    return apiRequest('/api/applications/create', {\n      method: 'POST',\n      body: JSON.stringify(applicationData)\n    }, getToken);\n  },\n  getByEmail: async (email, getToken) => {\n    return apiRequest(`/api/applications/get/${encodeURIComponent(email)}`, {\n      method: 'GET'\n    }, getToken);\n  },\n  getDetail: async (id, getToken) => {\n    return apiRequest(`/api/applications/${id}`, {\n      method: 'GET'\n    }, getToken);\n  },\n  getQuestions: async (branch, role, getToken) => {\n    return apiRequest(`/api/forms/questions?branch=${encodeURIComponent(branch)}&role=${encodeURIComponent(role)}`, {\n      method: 'GET'\n    }, getToken);\n  }\n};\n\n/**\n * Review API endpoints\n */\nexport const reviewAPI = {\n  getQueue: async (branch, getToken) => {\n    return apiRequest(`/api/review/queue/${branch}`, {\n      method: 'GET'\n    }, getToken);\n  },\n  claim: async (appId, getToken) => {\n    return apiRequest(`/api/review/claim/${appId}`, {\n      method: 'POST'\n    }, getToken);\n  },\n  submitDecision: async (appId, decisionData, getToken) => {\n    return apiRequest(`/api/review/decision/${appId}`, {\n      method: 'POST',\n      body: JSON.stringify(decisionData)\n    }, getToken);\n  },\n  addNote: async (appId, note, getToken) => {\n    return apiRequest(`/api/applications/${appId}/notes`, {\n      method: 'POST',\n      body: JSON.stringify({\n        note\n      })\n    }, getToken);\n  },\n  getBranchNotes: async (branch, getToken) => {\n    return apiRequest(`/api/reports/branch-notes/${branch}`, {\n      method: 'GET'\n    }, getToken);\n  }\n};\n\n/**\n * Stats API endpoints\n */\nexport const statsAPI = {\n  getBranchStats: async getToken => {\n    return apiRequest('/api/stats/branches', {\n      method: 'GET'\n    }, getToken);\n  },\n  getFunnelStats: async getToken => {\n    return apiRequest('/api/stats/funnel', {\n      method: 'GET'\n    }, getToken);\n  }\n};\nexport default {\n  authAPI,\n  userAPI,\n  applicationAPI,\n  reviewAPI,\n  statsAPI\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","apiRequest","endpoint","options","getToken","token","Error","headers","response","fetch","ok","errorData","json","catch","detail","error","status","console","authAPI","getMe","method","userAPI","create","userData","body","JSON","stringify","get","email","encodeURIComponent","applicationAPI","applicationData","getByEmail","getDetail","id","getQuestions","branch","role","reviewAPI","getQueue","claim","appId","submitDecision","decisionData","addNote","note","getBranchNotes","statsAPI","getBranchStats","getFunnelStats"],"sources":["/Users/aaravraina/Documents/Generate/Recruitment Systen/Recruitment-System/frontend/src/services/api.js"],"sourcesContent":["/**\n * API Service Layer\n * Handles all communication with the backend API\n * Automatically includes Clerk JWT token in requests\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n/**\n * Make an authenticated API request\n * @param {string} endpoint - API endpoint path\n * @param {object} options - Fetch options\n * @param {function} getToken - Clerk's getToken function\n * @returns {Promise} Response data\n */\nconst apiRequest = async (endpoint, options = {}, getToken) => {\n  try {\n    // Get the Clerk session token\n    const token = await getToken();\n    \n    if (!token) {\n      // For public endpoints like generic chat, we might not need token, \n      // but this wrapper assumes auth.\n      // For MVP, if no token, just return null or throw?\n      // Let's try to proceed if optional, but usually we want auth.\n      // Throwing error to ensure safety.\n      throw new Error('No authentication token available');\n    }\n\n    // Prepare headers\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n      ...options.headers,\n    };\n\n    // Make the request\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      ...options,\n      headers,\n    });\n\n    // Handle response\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || errorData.error || `HTTP error! status: ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('API Request Error:', error);\n    throw error;\n  }\n};\n\nexport const authAPI = {\n    getMe: async (getToken) => {\n        return apiRequest('/api/auth/me', { method: 'GET' }, getToken);\n    }\n};\n\n/**\n * User API endpoints\n */\nexport const userAPI = {\n  create: async (userData, getToken) => {\n    return apiRequest('/api/users/create', {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    }, getToken);\n  },\n\n  get: async (email, getToken) => {\n    return apiRequest(`/api/users/get/${encodeURIComponent(email)}`, {\n      method: 'GET',\n    }, getToken);\n  },\n};\n\n/**\n * Application API endpoints\n */\nexport const applicationAPI = {\n  create: async (applicationData, getToken) => {\n    return apiRequest('/api/applications/create', {\n      method: 'POST',\n      body: JSON.stringify(applicationData),\n    }, getToken);\n  },\n\n  getByEmail: async (email, getToken) => {\n    return apiRequest(`/api/applications/get/${encodeURIComponent(email)}`, {\n      method: 'GET',\n    }, getToken);\n  },\n  \n  getDetail: async (id, getToken) => {\n    return apiRequest(`/api/applications/${id}`, {\n      method: 'GET',\n    }, getToken);\n  },\n  \n  getQuestions: async (branch, role, getToken) => {\n    return apiRequest(`/api/forms/questions?branch=${encodeURIComponent(branch)}&role=${encodeURIComponent(role)}`, {\n      method: 'GET',\n    }, getToken);\n  }\n};\n\n/**\n * Review API endpoints\n */\nexport const reviewAPI = {\n  getQueue: async (branch, getToken) => {\n    return apiRequest(`/api/review/queue/${branch}`, {\n      method: 'GET',\n    }, getToken);\n  },\n\n  claim: async (appId, getToken) => {\n    return apiRequest(`/api/review/claim/${appId}`, {\n      method: 'POST',\n    }, getToken);\n  },\n\n  submitDecision: async (appId, decisionData, getToken) => {\n    return apiRequest(`/api/review/decision/${appId}`, {\n      method: 'POST',\n      body: JSON.stringify(decisionData),\n    }, getToken);\n  },\n  \n  addNote: async (appId, note, getToken) => {\n    return apiRequest(`/api/applications/${appId}/notes`, {\n      method: 'POST',\n      body: JSON.stringify({ note }),\n    }, getToken);\n  },\n  \n  getBranchNotes: async (branch, getToken) => {\n    return apiRequest(`/api/reports/branch-notes/${branch}`, {\n      method: 'GET',\n    }, getToken);\n  }\n};\n\n/**\n * Stats API endpoints\n */\nexport const statsAPI = {\n  getBranchStats: async (getToken) => {\n    return apiRequest('/api/stats/branches', {\n      method: 'GET',\n    }, getToken);\n  },\n  \n  getFunnelStats: async (getToken) => {\n    return apiRequest('/api/stats/funnel', {\n      method: 'GET',\n    }, getToken);\n  }\n};\n\nexport default {\n  authAPI,\n  userAPI,\n  applicationAPI,\n  reviewAPI,\n  statsAPI\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}